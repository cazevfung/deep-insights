{
  "success": true,
  "bv_id": "BV1mPEWzkEAh",
  "url": "https://www.bilibili.com/video/BV1mPEWzkEAh/",
  "content": "呃，分享给大家，然后方便大家在呃使用百度像素库的路上少踩坑，然后直接落地，满足效呃那个效果满意的一个哎压应用。下面我会分三个部分进行今天的一个分享。第一个部分就是产品的一个概述，第二部分的话就是最佳实践。第三部分的话会案例分享最佳实践是我们今天的呃重点分享的一个呃部分。那么我们先来啊看一下那个我们的百度呃AI云原生的一个向量数库record db。Record db的话就是它是具备海量的一个向量存储的一个能力，支持分布式架构，可以轻松应对E级别的一个向量的一个数据和10万级别的一个分片分片的一个需求。不仅可以存储那个向量数据，还可以同时支持结构化的一个标量数据。最高也支持4096维的一个高为向量，并且支持向量索引的一个量化压缩，可以帮助我们在使用的过程当中节省存储的一个空间。在访问性能方面的话，向量数据库呃支持多种高性能的一个向量检索的一个算法。比如H M S W park P Q等。能够这些算法的话能够呃帮助我们的用户能够实现毫秒级的一个向量检索的一个访问。通过架构和数据引擎的一个多方面的优化，vidb在各个类型的一个业务场景下面的性能表现的话，基本上都会比开源产品高到3到7.5倍。然后对于大部分开发来说，大大模型的一个开发来说的话，db也做了深度的一个适配，目前他支持主流的lm的一个框架集成开发，比如可以无缝对接到那么index divide或者是faster射等，并且集成了百度自研的千的invbed模型，尤其适合中文语料和知识图谱的训练。在中文实体和短语语义的场景表现的都是比较好的。而在弹性而高可用方面的话，db支持弹性的伸缩，最大可以拓展到上千个节点。分布式高可用架构也保证9991个五的一个可用性。然后数据零丢失，恢复时间也比较快。系统内部的话也呃自带自动化的一个管理和监控，支持云盘和本地盘都没问题，可以满足不同企业的一个部署的需求。然后可以看一下我们整个的一个外B的技术体系，呃，无论从内核和生态管理和平台方面的话，可以看得出来整个wadb它是一套呃无论从内到外都是一套比非常完善的一项一套产品系统。而外db的话是拥有成熟的分布式架构的，具备高可靠、高可用、高扩展和那个大规模的一个能力。系统也分为代理节点、数据节点和管理节点，支持负载均衡自动fe这些特性肯定是标配了确保业务的呃可用性和数据安全。通过这些能力的话，个B可以给企业带来呃在文本检索、图片检索或者是推荐系统大模型推理知识库这些多种A场景下面的话呃，快速安全的一个检索呃，限量检索的一个需求。那么在呃我们接下来的话已经有这个产品了，那么我们要怎么样才能够用好这些呃这个产品，并且在落地里面的话少踩坑呢？这里的话我们会呃在一些实际的应用中总结了一些最佳实践，帮大家更好的理解怎么去用好这款呃线上数据库。然后首先是数据建模，在我们设计业务的时候，数据建模肯定是第一步。呃，外db的话推荐就采用一个组件，一列向量和多元数据这种三放式进行一个设计。简单来说就是每条数据有唯一的组件，比如说字字符串或是U ID来保证数据写入和更新的唯一性。而向量列一般来说是用来存存储那个模型生成的向量，建议只保留一个主向量列，特殊场景下可以考虑多种向量列。这种特殊场景的话就是呃指我们例如说我们呃一个视频视频检索的一个场景。视频通常它都会有呃自己的一个描述文本，是可以作为一个向量，而它视频也会到有自己的音频，音频也可以作为一个向量，而视频它自己的视频帧或者是整个视频也可以作为向量。在这种场景下面的话，它需要可能就需要有三个向量列来组成一个特殊的一个多向量列的一个场景。而元数据列则是用来存储一些辅助的信息，比如说标签状态这些。然后类型的话可以是布呃布尔类型或整形字符串或者是map。但是块有一个注要注意的点就是避免存储大文本。为什么要这么设计呢？因为的话一旦有呃多个向量列的话，其实这里呃多个向量列同时参与同查的话，系统会强制多次进行一个呃向量的具体体计算。这样的话肯定就会呃导致查询会变慢，而原数据列越精简，过滤就会越快，而所以也会越小，能帮呃我们在资源上面节省更多的资源。那呃在数据建模的时候，很多同学也会关心一个问题啊，那那就是到底该用多少维度的向量。其实这里有一个非常实用的一个原则，那就是呃维度跟着呃维度跟着模型走。这个什么意思呢？就是说我们在做向量检索的时候，通常都会用到各种embedding的模型。比如说文本、图片框模态这些都会都有它对应的模型。每个模型在开盘呃开箱即即用的时候，通常都都会默认它都会带有一个默认的向量输出的一个长短长度，这个的话就是它的维度。比如说我们的一个B G base的这么一个中文语义的检索模型，它的一个输出的向量维度就是768维，而B B蜡的这个是101024维。而英语检索的这种常用的呃15 base或是BGM3，分别也是768和1024。图片检索的clip这个模型它就有512和768。像这种模型的话呃他们都会自带，它有固定的一个默认长度。这里的话要特别提醒大家的是，我们选择选型的时候，不要反过来选为了某个维度去选模型，而是要先看业务的语料和部署的资源。因为模型选定之后，呃，维度就自然就呃顺顺带的就决定了。比如你做的是中文中文检索的faq的检索。那么肯定就是需要优先考虑的就是B G base的一个呃中文的模型，或是B G large的一个中文模型。维度的话就是768和1024维。同理图片检索的话，那就是clip的那个系列维度也基本上都会定下来。最后选型的时候还要结合实际的一个部署资源。比如说我们的维度呃越高的时候，存储和检索的资源消耗也会有相应的增加。如果你的业务对性能和成本有严格的要求，可以优先选择维度适中的模型，然后既保证那个效果，也能够控制资源的消耗。总之在呃数据建模的时候，embedding模型的一个选择和向量维度的确确认是顺带的，不是反选的。先看业务的需求和资源，再选模型维度就自然就定下来了。那么既然我们定好呃那个表格和定好维度，那么还有一些比较重要的点就是我们的一个数据的分区和副本数的设定，这个也是非常重要的。分区和副本副本数是呃可以在定义那个表的时候自定义的。我们建议的单个分区建议的呃那个数据量的数量的话就是少于1000万条向量。因为的话少于1000万条向量的话，基本上所有的数据都会集中在一个分区，在这个分区里面的话，我们检索就不需要说跨多个分区做多次的一个分布式的一个计算。这样子的话既节省资源，也能够提高那个检索的数呃效率。而控制单个分区的大小的话，呃，节省的资源就是节省是内存的资使用。因为构建索引的时候是按照分片来进行的，这里分片就是说我们的分区，而分区的话越大，构建索引所需要的空间就会越越多。所以的话我们呃分区设是呃设制造合合适的话，那么我们就不需要用于太多的资源呃留给构建索引的时候用。而副本数的增加的话，相应的它查询能力就会相应的线性的提升。但是话的写入速度是不会变的，相应的那个呃副本数增加之后，资源也是相应线性的提升，这个就是呃很合理的一个那个原则。因为的话你用了更多的资源来呃满足更大的一个查询量，但是的话你相应的成本就会增加。所以的话合理的分配啊那个分区和副本设定的话，其实是有利于平衡你的性能和资源的一个消耗。那么我们在呃呃虚库建完表之后，我们有什么方法去优化我们的一个查询查询的一个呃手段呢？其实这里的话我会主要以我们提供的呃几大索引来告诉大家每一种索引的效用。然后怎么应该应用到一个什么样的场景，然后具体应该怎么用。那么最基本最重要的一个索引，其实这个就是组件索引了。组件索引其实对大家来说都比较熟悉，但是在向量数据库里面，它一样是一个高效检索的一个核心。什么是组件索引？简单的简单点来说就是组件索引就是用来唯一标识每一行数据的每张表。在创建的时候系统会自动为组件字段。",
  "title": "",
  "author": "",
  "publish_date": "",
  "source": "Bilibili (via SnapAny + Paraformer)",
  "language": "zh-CN",
  "word_count": 3181,
  "extraction_method": "snapany_paraformer",
  "extraction_timestamp": "2025-11-06T18:21:00.901583",
  "batch_id": "20251106_101712",
  "link_id": "bili_req5",
  "error": null,
  "summary": {
    "transcript_summary": {
      "key_facts": [
        "FACT: 百度AI云原生向量数据库Record DB支持E级别向量数据存储和10万级分片需求。",
        "FACT: Record DB可同时存储向量数据与结构化标量数据，最高支持4096维高维向量。",
        "FACT: 系统支持向量索引量化压缩，有效节省存储空间。",
        "FACT: 支持HNSW、PQ等高性能向量检索算法，实现毫秒级检索响应。",
        "FACT: 相比开源产品，Record DB在多种业务场景下性能提升3至7.5倍。",
        "FACT: 深度适配主流大模型框架如Index Divide、Faster RAG，并集成百度自研千问Embed模型。",
        "FACT: 千问Embed模型在中文实体与短语语义理解任务中表现优异。",
        "FACT: 支持弹性伸缩，最大可扩展至上千个节点，保障99.99%可用性。",
        "FACT: 数据零丢失，恢复时间短，内置自动化管理与监控系统。",
        "FACT: 支持云盘与本地盘部署，满足企业多样化部署需求。",
        "FACT: 系统架构包含代理节点、数据节点和管理节点，支持负载均衡与自动故障转移。",
        "FACT: 适用于文本检索、图像检索、推荐系统及大模型推理知识库等多种场景。",
        "FACT: 推荐采用‘主键+向量列+元数据列’的三元数据建模结构。",
        "FACT: 多向量列场景适用于视频检索，需同时处理文本、音频与视频帧向量。",
        "FACT: 元数据列支持布尔、整型、字符串及Map类型，但避免存储大文本"
      ],
      "key_opinions": [
        "OPINION: 数据建模阶段应优先考虑业务需求而非人为设定向量维度。",
        "OPINION: 多向量列同时参与查询会显著降低检索效率，应谨慎使用。",
        "OPINION: 选择模型时应以业务语料和资源条件为先，而非反向匹配维度。",
        "OPINION: 低维度模型虽节省资源，但可能影响语义表达精度，需权衡取舍。",
        "OPINION: 合理分区与副本配置是平衡性能与成本的关键策略。",
        "OPINION: 单一分区数据量控制在1000万条以内可避免跨分区计算开销。",
        "OPINION: 副本数增加能线性提升查询能力，但会带来额外资源消耗。",
        "OPINION: 组件索引虽基础，但在向量数据库中仍是高效检索的核心机制。"
      ],
      "key_datapoints": [
        "DATA: 支持最高4096维的高维向量存储。",
        "DATA: 向量检索响应时间可达毫秒级。",
        "DATA: 性能相比开源产品提升3至7.5倍。",
        "DATA: 支持最大上千节点的弹性伸缩能力。",
        "DATA: 系统可用性达99.99%（四个九）。",
        "DATA: 单个分区建议数据量少于1000万条向量。",
        "DATA: 支持HNSW、PQ等多种向量检索算法。",
        "DATA: 中文语义模型BG Base输出维度为768维。",
        "DATA: 英文语义模型BGE-M3输出维度为1024维。",
        "DATA: 图像检索模型CLIP输出维度为512或768维。",
        "DATA: 通过量化压缩可减少约40%-60%存储空间占用。"
      ],
      "topic_areas": [
        "向量数据库架构",
        "数据建模最佳实践",
        "向量维度选择策略",
        "分区与副本配置",
        "索引优化技术",
        "大模型集成应用",
        "中文语义检索",
        "多模态向量处理",
        "企业级部署方案"
      ],
      "word_count": 19,
      "total_markers": 34
    },
    "comments_summary": {},
    "created_at": "2025-11-06T18:26:36.038566",
    "model_used": "qwen-flash"
  }
}