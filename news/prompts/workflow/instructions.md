# 新闻工作流程编排详细说明

## 工作流程概览

这是一个端到端的新闻文章生成工作流程，包括以下步骤：

1. **频道抓取** (Channel Scraping)
   - 从配置的YouTube频道列表抓取视频链接
   - 按日期范围过滤视频
   - 生成频道批次文件

2. **内容抓取和Phase 0摘要** (Content Scraping + Phase 0)
   - 抓取所有链接的完整内容（视频转录、文章内容等）
   - 运行Phase 0摘要生成（快速摘要，提取关键事实、观点、数据点）
   - 保存到会话批次目录

3. **大纲生成** (Outline Generation)
   - 从Phase 0摘要中提取关键信息
   - 使用AI生成文章大纲（标题、描述、相关链接ID）
   - 保存大纲JSON文件

4. **文章生成** (Article Generation)
   - 从大纲中获取相关链接ID
   - 检索完整的转录/内容文本
   - 使用AI生成完整的Markdown格式文章
   - 保存文章文件和元数据

## 数据流

```
频道链接 → 内容抓取 → Phase 0摘要 → 大纲生成 → 文章生成
```

## 会话管理

- 每个工作流程实例都有一个唯一的会话ID
- 会话ID格式: `news_session_{timestamp}_{sequence}`
- 所有会话相关的文件都保存在 `data/news/sessions/{session_id}/`
- 会话元数据保存在 `session_metadata.json`

## 错误处理

- 如果某个步骤失败，根据配置决定是否继续
- 保存部分结果以便恢复和调试
- 记录详细的错误信息到会话元数据

## 配置驱动

- 所有路径、模型设置、提示路径都从 `config.yaml` 读取
- 工作流程步骤可以单独启用/禁用
- 支持自定义选项覆盖默认配置

